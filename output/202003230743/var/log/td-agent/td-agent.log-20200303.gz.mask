2020-03-02 21:38:01 -0500 [info]: #0 flushing all buffer forcedly
2020-03-03 01:28:45 -0500 [info]: Received graceful stop
2020-03-03 01:28:45 -0500 [info]: Received graceful stop
2020-03-03 01:28:45 -0500 [info]: #0 fluentd worker is now stopping worker=0
2020-03-03 01:28:45 -0500 [info]: #0 shutting down fluentd worker worker=0
2020-03-03 01:28:45 -0500 [info]: #0 shutting down input plugin type=:monitor_agent plugin_id="object:3fcad2a7cd1c"
2020-03-03 01:28:45 -0500 [info]: #0 shutting down input plugin type=:tail plugin_id="object:3fcad01c093c"
2020-03-03 01:28:45 -0500 [info]: #0 shutting down input plugin type=:syslog plugin_id="object:3fcad0136aac"
2020-03-03 01:28:46 -0500 [info]: #0 shutting down output plugin type=:forward plugin_id="object:3fcacff9200c"
2020-03-03 01:28:46 -0500 [info]: Worker 0 finished with status 0
2020-03-03 01:28:46 -0500 [info]: parsing config file is succeeded path="/etc/td-agent/td-agent.conf"
2020-03-03 01:28:46 -0500 [info]: gem 'fluent-plugin-elasticsearch' version '4.0.3'
2020-03-03 01:28:46 -0500 [info]: gem 'fluent-plugin-kafka' version '0.12.3'
2020-03-03 01:28:46 -0500 [info]: gem 'fluent-plugin-prometheus' version '1.7.3'
2020-03-03 01:28:46 -0500 [info]: gem 'fluent-plugin-prometheus_pushgateway' version '0.0.1'
2020-03-03 01:28:46 -0500 [info]: gem 'fluent-plugin-record-modifier' version '2.1.0'
2020-03-03 01:28:46 -0500 [info]: gem 'fluent-plugin-rewrite-tag-filter' version '2.2.0'
2020-03-03 01:28:46 -0500 [info]: gem 'fluent-plugin-s3' version '1.3.0'
2020-03-03 01:28:46 -0500 [info]: gem 'fluent-plugin-systemd' version '1.0.2'
2020-03-03 01:28:46 -0500 [info]: gem 'fluent-plugin-td' version '1.1.0'
2020-03-03 01:28:46 -0500 [info]: gem 'fluent-plugin-td-monitoring' version '0.2.4'
2020-03-03 01:28:46 -0500 [info]: gem 'fluent-plugin-webhdfs' version '1.2.4'
2020-03-03 01:28:46 -0500 [info]: gem 'fluentd' version '1.9.2'
2020-03-03 01:28:46 -0500 [info]: 'flush_interval' is configured at out side of <buffer>. 'flush_mode' is set to 'interval' to keep existing behaviour
2020-03-03 01:28:46 -0500 [warn]: Use different plugin for secondary. Check the plugin works with primary like secondary_file primary="Fluent::Plugin::ForwardOutput" secondary="Fluent::Plugin::FileOutput"
2020-03-03 01:28:46 -0500 [info]: adding forwarding server fqdn_md5_a916ec8bff00593ba75ba91f0e67e669 host=fqdn_md5_53ea78d3263c5db37226e7f8d2ee07e8 port=24224 weight=60 plugin_id="object:3fac956780dc"
2020-03-03 01:28:46 -0500 [warn]: define <match fluent.**> to capture fluentd logs in top level is deprecated. Use <label @FLUENT_LOG> instead
2020-03-03 01:28:46 -0500 [info]: using configuration file: <ROOT>
<source>
@type tail
path "/var/log/nginx/access.log"
pos_file "/var/log/td-agent/nginx.access.log.pos"
format nginx
tag fqdn_md5_22db84b867029dac7fe37db6b9e1efbe
<parse>
@type nginx
</parse>
</source>
<source>
@type syslog
port 5140
bind ipv4_md5_f1f17934834ae2613699701054ef9684
tag "system"
</source>
<source>
@type monitor_agent
bind ipv4_md5_f1f17934834ae2613699701054ef9684
port 24220
</source>
<match **>
@type forward
flush_interval 1s
<service>
host fqdn_md5_53ea78d3263c5db37226e7f8d2ee07e8
port 24224
</service>
<secondary>
@type "file"
path "/var/log/td-agent/forward-failed"
<buffer time>
path /var/log/td-agent/forward-failed
</buffer>
</secondary>
<buffer tag>
flush_interval 1s
</buffer>
</match>
</ROOT>
2020-03-03 01:28:46 -0500 [info]: starting fluentd-1.9.2 pid=19843 ruby="2.4.9"
2020-03-03 01:28:46 -0500 [info]: spawn command to main: cmdline=["/opt/td-agent/embedded/bin/ruby", "-Eascii-8bit:ascii-8bit", "/opt/td-agent/embedded/bin/fluentd", "--log", "/var/log/td-agent/td-agent.log", "--daemon", "/var/run/td-agent/td-agent.pid", "--under-supervisor"]
2020-03-03 01:28:47 -0500 [info]: adding match pattern="**" type="forward"
2020-03-03 01:28:47 -0500 [info]: #0 'flush_interval' is configured at out side of <buffer>. 'flush_mode' is set to 'interval' to keep existing behaviour
2020-03-03 01:28:47 -0500 [warn]: #0 Use different plugin for secondary. Check the plugin works with primary like secondary_file primary="Fluent::Plugin::ForwardOutput" secondary="Fluent::Plugin::FileOutput"
2020-03-03 01:28:47 -0500 [info]: #0 adding forwarding server fqdn_md5_a916ec8bff00593ba75ba91f0e67e669 host=fqdn_md5_53ea78d3263c5db37226e7f8d2ee07e8 port=24224 weight=60 plugin_id="object:3f8d20a8b604"
2020-03-03 01:28:47 -0500 [info]: adding source type="tail"
2020-03-03 01:28:47 -0500 [info]: adding source type="syslog"
2020-03-03 01:28:47 -0500 [info]: adding source type="monitor_agent"
2020-03-03 01:28:47 -0500 [warn]: #0 define <match fluent.**> to capture fluentd logs in top level is deprecated. Use <label @FLUENT_LOG> instead
2020-03-03 01:28:47 -0500 [info]: #0 starting fluentd worker pid=19860 ppid=19855 worker=0
2020-03-03 01:28:47 -0500 [info]: #0 listening syslog socket on ipv4_md5_f1f17934834ae2613699701054ef9684:5140 with udp
2020-03-03 01:28:47 -0500 [info]: #0 following tail of /var/log/nginx/access.log
2020-03-03 01:28:47 -0500 [info]: #0 fluentd worker is now running worker=0
2020-03-03 02:20:13 -0500 [warn]: #0 detached forwarding server '' host=fqdn_md5_53ea78d3263c5db37226e7f8d2ee07e8 port=24224 hard_timeout=true
2020-03-03 02:20:14 -0500 [warn]: #0 failed to flush the buffer. retry_time=0 next_retry_seconds=2020-03-03 02:20:15 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:20:14 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/load_balancer.rb:55:in `select_healthy_node'
2020-03-03 02:20:14 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/service_discovery/manager.rb:94:in `select_service'
2020-03-03 02:20:14 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:353:in `write'
2020-03-03 02:20:14 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:1133:in `try_flush'
2020-03-03 02:20:14 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:1439:in `flush_thread_run'
2020-03-03 02:20:14 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:461:in `block (2 levels) in start'
2020-03-03 02:20:14 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/thread.rb:78:in `block in thread_create'
2020-03-03 02:20:15 -0500 [warn]: #0 failed to flush the buffer. retry_time=1 next_retry_seconds=2020-03-03 02:20:16 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:20:15 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 02:20:16 -0500 [warn]: #0 failed to flush the buffer. retry_time=2 next_retry_seconds=2020-03-03 02:20:18 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:20:16 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 02:20:18 -0500 [warn]: #0 failed to flush the buffer. retry_time=3 next_retry_seconds=2020-03-03 02:20:22 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:20:18 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 02:20:22 -0500 [warn]: #0 failed to flush the buffer. retry_time=4 next_retry_seconds=2020-03-03 02:20:31 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:20:22 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 02:20:32 -0500 [warn]: #0 failed to flush the buffer. retry_time=5 next_retry_seconds=2020-03-03 02:20:48 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:20:32 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 02:20:50 -0500 [warn]: #0 failed to flush the buffer. retry_time=6 next_retry_seconds=2020-03-03 02:21:20 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:20:50 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 02:21:22 -0500 [warn]: #0 failed to flush the buffer. retry_time=7 next_retry_seconds=2020-03-03 02:22:28 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:21:22 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 02:22:33 -0500 [warn]: #0 failed to flush the buffer. retry_time=8 next_retry_seconds=2020-03-03 02:24:34 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:22:33 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 02:24:44 -0500 [warn]: #0 failed to flush the buffer. retry_time=9 next_retry_seconds=2020-03-03 02:28:51 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:24:44 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 02:29:12 -0500 [warn]: #0 failed to flush the buffer. retry_time=10 next_retry_seconds=2020-03-03 02:37:31 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:29:12 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 02:38:13 -0500 [warn]: #0 failed to flush the buffer. retry_time=11 next_retry_seconds=2020-03-03 02:54:22 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:38:13 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 02:55:43 -0500 [warn]: #0 failed to flush the buffer. retry_time=12 next_retry_seconds=2020-03-03 03:33:41 -0500 chunk="59fee227ca5374de908817a797718c32" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-03-03 02:55:43 -0500 [warn]: #0 suppressed same stacktrace
2020-03-03 03:15:01 -0500 [info]: #0 force flushing buffered events
