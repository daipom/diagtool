2020-02-26 20:14:01 -0500 [info]: #0 flushing all buffer forcedly
2020-02-26 20:14:14 -0500 [info]: Received graceful stop
2020-02-26 20:14:14 -0500 [info]: Received graceful stop
2020-02-26 20:14:14 -0500 [info]: #0 fluentd worker is now stopping worker=0
2020-02-26 20:14:14 -0500 [info]: #0 shutting down fluentd worker worker=0
2020-02-26 20:14:14 -0500 [info]: #0 shutting down input plugin type=:monitor_agent plugin_id="object:3fefc6a7c36c"
2020-02-26 20:14:14 -0500 [info]: #0 shutting down input plugin type=:syslog plugin_id="object:3fefc414069c"
2020-02-26 20:14:14 -0500 [info]: #0 shutting down input plugin type=:tail plugin_id="object:3fefc41c4a28"
2020-02-26 20:14:15 -0500 [info]: #0 shutting down output plugin type=:forward plugin_id="object:3fefc3f961c0"
2020-02-26 20:14:16 -0500 [info]: Worker 0 finished with status 0
2020-02-27 16:41:28 -0500 [info]: parsing config file is succeeded path="/etc/td-agent/td-agent.conf"
2020-02-27 16:41:28 -0500 [info]: gem 'fluent-plugin-elasticsearch' version '4.0.3'
2020-02-27 16:41:28 -0500 [info]: gem 'fluent-plugin-kafka' version '0.12.3'
2020-02-27 16:41:28 -0500 [info]: gem 'fluent-plugin-prometheus' version '1.7.3'
2020-02-27 16:41:28 -0500 [info]: gem 'fluent-plugin-prometheus_pushgateway' version '0.0.1'
2020-02-27 16:41:28 -0500 [info]: gem 'fluent-plugin-record-modifier' version '2.1.0'
2020-02-27 16:41:28 -0500 [info]: gem 'fluent-plugin-rewrite-tag-filter' version '2.2.0'
2020-02-27 16:41:28 -0500 [info]: gem 'fluent-plugin-s3' version '1.3.0'
2020-02-27 16:41:28 -0500 [info]: gem 'fluent-plugin-systemd' version '1.0.2'
2020-02-27 16:41:28 -0500 [info]: gem 'fluent-plugin-td' version '1.1.0'
2020-02-27 16:41:28 -0500 [info]: gem 'fluent-plugin-td-monitoring' version '0.2.4'
2020-02-27 16:41:28 -0500 [info]: gem 'fluent-plugin-webhdfs' version '1.2.4'
2020-02-27 16:41:28 -0500 [info]: gem 'fluentd' version '1.9.2'
2020-02-27 16:41:28 -0500 [info]: 'flush_interval' is configured at out side of <buffer>. 'flush_mode' is set to 'interval' to keep existing behaviour
2020-02-27 16:41:28 -0500 [warn]: Use different plugin for secondary. Check the plugin works with primary like secondary_file primary="Fluent::Plugin::ForwardOutput" secondary="Fluent::Plugin::FileOutput"
2020-02-27 16:41:28 -0500 [info]: adding forwarding server ipv4_md5_28b515a0b563a5ac476cc331b75963d0:24224' host=ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port=24224 weight=60 plugin_id="object:3ffa7d66d020"
2020-02-27 16:41:28 -0500 [warn]: define <match fluent.**> to capture fluentd logs in top level is deprecated. Use <label @FLUENT_LOG> instead
2020-02-27 16:41:28 -0500 [info]: using configuration file: <ROOT>
<source>
@type tail
path "/var/log/nginx/access.log"
pos_file "/var/log/td-agent/nginx.access.log.pos"
format nginx
tag fqdn_md5_22db84b867029dac7fe37db6b9e1efbe
<parse>
@type nginx
</parse>
</source>
<source>
@type syslog
port 5140
bind ipv4_md5_f1f17934834ae2613699701054ef9684
tag "system"
</source>
<source>
@type monitor_agent
bind ipv4_md5_f1f17934834ae2613699701054ef9684
port 24220
</source>
<match **>
@type forward
flush_interval 1s
<service>
host ipv4_md5_28b515a0b563a5ac476cc331b75963d0
port 24224
</service>
<secondary>
@type "file"
path "/var/log/td-agent/forward-failed"
<buffer time>
path /var/log/td-agent/forward-failed
</buffer>
</secondary>
<buffer tag>
flush_interval 1s
</buffer>
</match>
</ROOT>
2020-02-27 16:41:28 -0500 [info]: starting fluentd-1.9.2 pid=1020 ruby="2.4.9"
2020-02-27 16:41:28 -0500 [info]: spawn command to main: cmdline=["/opt/td-agent/embedded/bin/ruby", "-Eascii-8bit:ascii-8bit", "/opt/td-agent/embedded/bin/fluentd", "--log", "/var/log/td-agent/td-agent.log", "--daemon", "/var/run/td-agent/td-agent.pid", "--under-supervisor"]
2020-02-27 16:41:29 -0500 [info]: adding match pattern="**" type="forward"
2020-02-27 16:41:29 -0500 [info]: #0 'flush_interval' is configured at out side of <buffer>. 'flush_mode' is set to 'interval' to keep existing behaviour
2020-02-27 16:41:29 -0500 [warn]: #0 Use different plugin for secondary. Check the plugin works with primary like secondary_file primary="Fluent::Plugin::ForwardOutput" secondary="Fluent::Plugin::FileOutput"
2020-02-27 16:41:29 -0500 [info]: #0 adding forwarding server ipv4_md5_28b515a0b563a5ac476cc331b75963d0:24224' host=ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port=24224 weight=60 plugin_id="object:3f9fdcd798c4"
2020-02-27 16:41:29 -0500 [info]: adding source type="tail"
2020-02-27 16:41:29 -0500 [info]: adding source type="syslog"
2020-02-27 16:41:29 -0500 [info]: adding source type="monitor_agent"
2020-02-27 16:41:29 -0500 [warn]: #0 define <match fluent.**> to capture fluentd logs in top level is deprecated. Use <label @FLUENT_LOG> instead
2020-02-27 16:41:29 -0500 [info]: #0 starting fluentd worker pid=1462 ppid=1456 worker=0
2020-02-27 16:41:29 -0500 [info]: #0 listening syslog socket on ipv4_md5_f1f17934834ae2613699701054ef9684:5140 with udp
2020-02-27 16:41:29 -0500 [info]: #0 following tail of /var/log/nginx/access.log
2020-02-27 16:41:29 -0500 [info]: #0 fluentd worker is now running worker=0
2020-02-27 18:09:46 -0500 [info]: Received graceful stop
2020-02-27 18:09:46 -0500 [info]: Received graceful stop
2020-02-27 18:09:47 -0500 [info]: #0 fluentd worker is now stopping worker=0
2020-02-27 18:09:47 -0500 [info]: #0 shutting down fluentd worker worker=0
2020-02-27 18:09:47 -0500 [info]: #0 shutting down input plugin type=:monitor_agent plugin_id="object:3f9fdf86fed4"
2020-02-27 18:09:47 -0500 [info]: #0 shutting down input plugin type=:syslog plugin_id="object:3f9fdcf24fc0"
2020-02-27 18:09:47 -0500 [info]: #0 shutting down input plugin type=:tail plugin_id="object:3f9fdcfaf710"
2020-02-27 18:09:48 -0500 [info]: #0 shutting down output plugin type=:forward plugin_id="object:3f9fdcd798c4"
2020-02-27 18:09:48 -0500 [info]: Worker 0 finished with status 0
2020-02-27 19:07:35 -0500 [info]: parsing config file is succeeded path="/etc/td-agent/td-agent.conf"
2020-02-27 19:07:35 -0500 [info]: gem 'fluent-plugin-elasticsearch' version '4.0.3'
2020-02-27 19:07:35 -0500 [info]: gem 'fluent-plugin-kafka' version '0.12.3'
2020-02-27 19:07:35 -0500 [info]: gem 'fluent-plugin-prometheus' version '1.7.3'
2020-02-27 19:07:35 -0500 [info]: gem 'fluent-plugin-prometheus_pushgateway' version '0.0.1'
2020-02-27 19:07:35 -0500 [info]: gem 'fluent-plugin-record-modifier' version '2.1.0'
2020-02-27 19:07:35 -0500 [info]: gem 'fluent-plugin-rewrite-tag-filter' version '2.2.0'
2020-02-27 19:07:35 -0500 [info]: gem 'fluent-plugin-s3' version '1.3.0'
2020-02-27 19:07:35 -0500 [info]: gem 'fluent-plugin-systemd' version '1.0.2'
2020-02-27 19:07:35 -0500 [info]: gem 'fluent-plugin-td' version '1.1.0'
2020-02-27 19:07:35 -0500 [info]: gem 'fluent-plugin-td-monitoring' version '0.2.4'
2020-02-27 19:07:35 -0500 [info]: gem 'fluent-plugin-webhdfs' version '1.2.4'
2020-02-27 19:07:35 -0500 [info]: gem 'fluentd' version '1.9.2'
2020-02-27 19:07:35 -0500 [info]: 'flush_interval' is configured at out side of <buffer>. 'flush_mode' is set to 'interval' to keep existing behaviour
2020-02-27 19:07:35 -0500 [warn]: Use different plugin for secondary. Check the plugin works with primary like secondary_file primary="Fluent::Plugin::ForwardOutput" secondary="Fluent::Plugin::FileOutput"
2020-02-27 19:07:35 -0500 [info]: adding forwarding server ipv4_md5_28b515a0b563a5ac476cc331b75963d0:24224' host=ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port=24224 weight=60 plugin_id="object:3fead1f7fb10"
2020-02-27 19:07:35 -0500 [warn]: define <match fluent.**> to capture fluentd logs in top level is deprecated. Use <label @FLUENT_LOG> instead
2020-02-27 19:07:35 -0500 [info]: using configuration file: <ROOT>
<source>
@type tail
path "/var/log/nginx/access.log"
pos_file "/var/log/td-agent/nginx.access.log.pos"
format nginx
tag fqdn_md5_22db84b867029dac7fe37db6b9e1efbe
<parse>
@type nginx
</parse>
</source>
<source>
@type syslog
port 5140
bind ipv4_md5_f1f17934834ae2613699701054ef9684
tag "system"
</source>
<source>
@type monitor_agent
bind ipv4_md5_f1f17934834ae2613699701054ef9684
port 24220
</source>
<match **>
@type forward
flush_interval 1s
<service>
host ipv4_md5_28b515a0b563a5ac476cc331b75963d0
port 24224
</service>
<secondary>
@type "file"
path "/var/log/td-agent/forward-failed"
<buffer time>
path /var/log/td-agent/forward-failed
</buffer>
</secondary>
<buffer tag>
flush_interval 1s
</buffer>
</match>
</ROOT>
2020-02-27 19:07:35 -0500 [info]: starting fluentd-1.9.2 pid=1026 ruby="2.4.9"
2020-02-27 19:07:35 -0500 [info]: spawn command to main: cmdline=["/opt/td-agent/embedded/bin/ruby", "-Eascii-8bit:ascii-8bit", "/opt/td-agent/embedded/bin/fluentd", "--log", "/var/log/td-agent/td-agent.log", "--daemon", "/var/run/td-agent/td-agent.pid", "--under-supervisor"]
2020-02-27 19:07:37 -0500 [info]: adding match pattern="**" type="forward"
2020-02-27 19:07:37 -0500 [info]: #0 'flush_interval' is configured at out side of <buffer>. 'flush_mode' is set to 'interval' to keep existing behaviour
2020-02-27 19:07:37 -0500 [warn]: #0 Use different plugin for secondary. Check the plugin works with primary like secondary_file primary="Fluent::Plugin::ForwardOutput" secondary="Fluent::Plugin::FileOutput"
2020-02-27 19:07:37 -0500 [info]: #0 adding forwarding server ipv4_md5_28b515a0b563a5ac476cc331b75963d0:24224' host=ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port=24224 weight=60 plugin_id="object:3fb7b6585a54"
2020-02-27 19:07:37 -0500 [info]: adding source type="tail"
2020-02-27 19:07:37 -0500 [info]: adding source type="syslog"
2020-02-27 19:07:37 -0500 [info]: adding source type="monitor_agent"
2020-02-27 19:07:37 -0500 [warn]: #0 define <match fluent.**> to capture fluentd logs in top level is deprecated. Use <label @FLUENT_LOG> instead
2020-02-27 19:07:37 -0500 [info]: #0 starting fluentd worker pid=1467 ppid=1460 worker=0
2020-02-27 19:07:37 -0500 [info]: #0 listening syslog socket on ipv4_md5_f1f17934834ae2613699701054ef9684:5140 with udp
2020-02-27 19:07:37 -0500 [info]: #0 following tail of /var/log/nginx/access.log
2020-02-27 19:07:37 -0500 [info]: #0 fluentd worker is now running worker=0
2020-02-27 19:07:58 -0500 [warn]: #0 failed to flush the buffer. retry_time=0 next_retry_seconds=2020-02-27 19:07:59 -0500 chunk="59f97a00bf5b715c11d646092309376a" error_class=Errno::EHOSTUNREACH error="No route to host - connect(2) for ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port 24224"
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/socket.rb:62:in `initialize'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/socket.rb:62:in `new'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/socket.rb:62:in `socket_create_tcp'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:394:in `create_transfer_socket'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/connection_manager.rb:46:in `call'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/connection_manager.rb:46:in `connect'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:782:in `connect'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:656:in `send_data'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:353:in `block in write'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/load_balancer.rb:46:in `block in select_healthy_node'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/load_balancer.rb:37:in `times'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/load_balancer.rb:37:in `select_healthy_node'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/service_discovery/manager.rb:94:in `select_service'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:353:in `write'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:1133:in `try_flush'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:1439:in `flush_thread_run'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:461:in `block (2 levels) in start'
2020-02-27 19:07:58 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/thread.rb:78:in `block in thread_create'
2020-02-27 19:08:16 -0500 [warn]: #0 failed to flush the buffer. retry_time=1 next_retry_seconds=2020-02-27 19:08:17 -0500 chunk="59f97a00bf5b715c11d646092309376a" error_class=Errno::EHOSTUNREACH error="No route to host - connect(2) for ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port 24224"
2020-02-27 19:08:16 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:08:16 -0500 [warn]: #0 detached forwarding server '' host=ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port=24224 phi=17.126069354188346 phi_threshold=16
2020-02-27 19:08:17 -0500 [warn]: #0 failed to flush the buffer. retry_time=2 next_retry_seconds=2020-02-27 19:08:19 -0500 chunk="59f97a00bf5b715c11d646092309376a" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:08:17 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/load_balancer.rb:55:in `select_healthy_node'
2020-02-27 19:08:17 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/service_discovery/manager.rb:94:in `select_service'
2020-02-27 19:08:17 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:353:in `write'
2020-02-27 19:08:17 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:1133:in `try_flush'
2020-02-27 19:08:17 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:1439:in `flush_thread_run'
2020-02-27 19:08:17 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:461:in `block (2 levels) in start'
2020-02-27 19:08:17 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/thread.rb:78:in `block in thread_create'
2020-02-27 19:08:19 -0500 [warn]: #0 failed to flush the buffer. retry_time=3 next_retry_seconds=2020-02-27 19:08:23 -0500 chunk="59f97a00bf5b715c11d646092309376a" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:08:19 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:08:23 -0500 [warn]: #0 failed to flush the buffer. retry_time=4 next_retry_seconds=2020-02-27 19:08:30 -0500 chunk="59f97a00bf5b715c11d646092309376a" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:08:23 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:08:30 -0500 [warn]: #0 failed to flush the buffer. retry_time=5 next_retry_seconds=2020-02-27 19:08:47 -0500 chunk="59f97a00bf5b715c11d646092309376a" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:08:30 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:08:47 -0500 [warn]: #0 failed to flush the buffer. retry_time=6 next_retry_seconds=2020-02-27 19:09:19 -0500 chunk="59f97a00bf5b715c11d646092309376a" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:08:47 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:09:19 -0500 [warn]: #0 failed to flush the buffer. retry_time=7 next_retry_seconds=2020-02-27 19:10:23 -0500 chunk="59f97a00bf5b715c11d646092309376a" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:09:19 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:11:20 -0500 [info]: parsing config file is succeeded path="/etc/td-agent/td-agent.conf"
2020-02-27 19:11:20 -0500 [info]: gem 'fluent-plugin-elasticsearch' version '4.0.3'
2020-02-27 19:11:20 -0500 [info]: gem 'fluent-plugin-kafka' version '0.12.3'
2020-02-27 19:11:20 -0500 [info]: gem 'fluent-plugin-prometheus' version '1.7.3'
2020-02-27 19:11:20 -0500 [info]: gem 'fluent-plugin-prometheus_pushgateway' version '0.0.1'
2020-02-27 19:11:20 -0500 [info]: gem 'fluent-plugin-record-modifier' version '2.1.0'
2020-02-27 19:11:20 -0500 [info]: gem 'fluent-plugin-rewrite-tag-filter' version '2.2.0'
2020-02-27 19:11:20 -0500 [info]: gem 'fluent-plugin-s3' version '1.3.0'
2020-02-27 19:11:20 -0500 [info]: gem 'fluent-plugin-systemd' version '1.0.2'
2020-02-27 19:11:20 -0500 [info]: gem 'fluent-plugin-td' version '1.1.0'
2020-02-27 19:11:20 -0500 [info]: gem 'fluent-plugin-td-monitoring' version '0.2.4'
2020-02-27 19:11:20 -0500 [info]: gem 'fluent-plugin-webhdfs' version '1.2.4'
2020-02-27 19:11:20 -0500 [info]: gem 'fluentd' version '1.9.2'
2020-02-27 19:11:20 -0500 [info]: 'flush_interval' is configured at out side of <buffer>. 'flush_mode' is set to 'interval' to keep existing behaviour
2020-02-27 19:11:20 -0500 [warn]: Use different plugin for secondary. Check the plugin works with primary like secondary_file primary="Fluent::Plugin::ForwardOutput" secondary="Fluent::Plugin::FileOutput"
2020-02-27 19:11:20 -0500 [info]: adding forwarding server ipv4_md5_28b515a0b563a5ac476cc331b75963d0:24224' host=ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port=24224 weight=60 plugin_id="object:3fbe31970250"
2020-02-27 19:11:20 -0500 [warn]: define <match fluent.**> to capture fluentd logs in top level is deprecated. Use <label @FLUENT_LOG> instead
2020-02-27 19:11:20 -0500 [info]: using configuration file: <ROOT>
<source>
@type tail
path "/var/log/nginx/access.log"
pos_file "/var/log/td-agent/nginx.access.log.pos"
format nginx
tag fqdn_md5_22db84b867029dac7fe37db6b9e1efbe
<parse>
@type nginx
</parse>
</source>
<source>
@type syslog
port 5140
bind ipv4_md5_f1f17934834ae2613699701054ef9684
tag "system"
</source>
<source>
@type monitor_agent
bind ipv4_md5_f1f17934834ae2613699701054ef9684
port 24220
</source>
<match **>
@type forward
flush_interval 1s
<service>
host ipv4_md5_28b515a0b563a5ac476cc331b75963d0
port 24224
</service>
<secondary>
@type "file"
path "/var/log/td-agent/forward-failed"
<buffer time>
path /var/log/td-agent/forward-failed
</buffer>
</secondary>
<buffer tag>
flush_interval 1s
</buffer>
</match>
</ROOT>
2020-02-27 19:11:20 -0500 [info]: starting fluentd-1.9.2 pid=1043 ruby="2.4.9"
2020-02-27 19:11:20 -0500 [info]: spawn command to main: cmdline=["/opt/td-agent/embedded/bin/ruby", "-Eascii-8bit:ascii-8bit", "/opt/td-agent/embedded/bin/fluentd", "--log", "/var/log/td-agent/td-agent.log", "--daemon", "/var/run/td-agent/td-agent.pid", "--under-supervisor"]
2020-02-27 19:11:22 -0500 [info]: adding match pattern="**" type="forward"
2020-02-27 19:11:22 -0500 [info]: #0 'flush_interval' is configured at out side of <buffer>. 'flush_mode' is set to 'interval' to keep existing behaviour
2020-02-27 19:11:22 -0500 [warn]: #0 Use different plugin for secondary. Check the plugin works with primary like secondary_file primary="Fluent::Plugin::ForwardOutput" secondary="Fluent::Plugin::FileOutput"
2020-02-27 19:11:22 -0500 [info]: #0 adding forwarding server ipv4_md5_28b515a0b563a5ac476cc331b75963d0:24224' host=ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port=24224 weight=60 plugin_id="object:3ffb25c89d98"
2020-02-27 19:11:22 -0500 [info]: adding source type="tail"
2020-02-27 19:11:22 -0500 [info]: adding source type="syslog"
2020-02-27 19:11:22 -0500 [info]: adding source type="monitor_agent"
2020-02-27 19:11:22 -0500 [warn]: #0 define <match fluent.**> to capture fluentd logs in top level is deprecated. Use <label @FLUENT_LOG> instead
2020-02-27 19:11:22 -0500 [info]: #0 starting fluentd worker pid=1474 ppid=1466 worker=0
2020-02-27 19:11:22 -0500 [info]: #0 listening syslog socket on ipv4_md5_f1f17934834ae2613699701054ef9684:5140 with udp
2020-02-27 19:11:22 -0500 [info]: #0 following tail of /var/log/nginx/access.log
2020-02-27 19:11:22 -0500 [info]: #0 fluentd worker is now running worker=0
2020-02-27 19:11:42 -0500 [warn]: #0 failed to flush the buffer. retry_time=0 next_retry_seconds=2020-02-27 19:11:43 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Errno::EHOSTUNREACH error="No route to host - connect(2) for ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port 24224"
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/socket.rb:62:in `initialize'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/socket.rb:62:in `new'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/socket.rb:62:in `socket_create_tcp'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:394:in `create_transfer_socket'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/connection_manager.rb:46:in `call'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/connection_manager.rb:46:in `connect'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:782:in `connect'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:656:in `send_data'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:353:in `block in write'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/load_balancer.rb:46:in `block in select_healthy_node'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/load_balancer.rb:37:in `times'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/load_balancer.rb:37:in `select_healthy_node'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/service_discovery/manager.rb:94:in `select_service'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:353:in `write'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:1133:in `try_flush'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:1439:in `flush_thread_run'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:461:in `block (2 levels) in start'
2020-02-27 19:11:42 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/thread.rb:78:in `block in thread_create'
2020-02-27 19:12:01 -0500 [warn]: #0 failed to flush the buffer. retry_time=1 next_retry_seconds=2020-02-27 19:12:02 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Errno::EHOSTUNREACH error="No route to host - connect(2) for ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port 24224"
2020-02-27 19:12:01 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:12:01 -0500 [warn]: #0 detached forwarding server '' host=ipv4_md5_28b515a0b563a5ac476cc331b75963d0 port=24224 phi=17.02796205196826 phi_threshold=16
2020-02-27 19:12:02 -0500 [warn]: #0 failed to flush the buffer. retry_time=2 next_retry_seconds=2020-02-27 19:12:04 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:12:02 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward/load_balancer.rb:55:in `select_healthy_node'
2020-02-27 19:12:02 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/service_discovery/manager.rb:94:in `select_service'
2020-02-27 19:12:02 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/out_forward.rb:353:in `write'
2020-02-27 19:12:02 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:1133:in `try_flush'
2020-02-27 19:12:02 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:1439:in `flush_thread_run'
2020-02-27 19:12:02 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin/output.rb:461:in `block (2 levels) in start'
2020-02-27 19:12:02 -0500 [warn]: #0 /opt/td-agent/embedded/lib/ruby/gems/2.4.0/gems/fluentd-1.9.2/lib/fluent/plugin_helper/thread.rb:78:in `block in thread_create'
2020-02-27 19:12:04 -0500 [warn]: #0 failed to flush the buffer. retry_time=3 next_retry_seconds=2020-02-27 19:12:08 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:12:04 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:12:08 -0500 [warn]: #0 failed to flush the buffer. retry_time=4 next_retry_seconds=2020-02-27 19:12:15 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:12:08 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:12:15 -0500 [warn]: #0 failed to flush the buffer. retry_time=5 next_retry_seconds=2020-02-27 19:12:33 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:12:15 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:12:37 -0500 [warn]: #0 failed to flush the buffer. retry_time=6 next_retry_seconds=2020-02-27 19:13:08 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:12:37 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:13:08 -0500 [warn]: #0 failed to flush the buffer. retry_time=7 next_retry_seconds=2020-02-27 19:14:07 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:13:08 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:14:07 -0500 [warn]: #0 failed to flush the buffer. retry_time=8 next_retry_seconds=2020-02-27 19:16:06 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:14:07 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:16:07 -0500 [warn]: #0 failed to flush the buffer. retry_time=9 next_retry_seconds=2020-02-27 19:20:36 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:16:07 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:20:36 -0500 [warn]: #0 failed to flush the buffer. retry_time=10 next_retry_seconds=2020-02-27 19:29:53 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:20:36 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:29:53 -0500 [warn]: #0 failed to flush the buffer. retry_time=11 next_retry_seconds=2020-02-27 19:46:31 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:29:53 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 19:46:31 -0500 [warn]: #0 failed to flush the buffer. retry_time=12 next_retry_seconds=2020-02-27 20:21:24 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 19:46:31 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 20:21:24 -0500 [warn]: #0 failed to flush the buffer. retry_time=13 next_retry_seconds=2020-02-27 21:34:49 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 20:21:24 -0500 [warn]: #0 suppressed same stacktrace
2020-02-27 21:38:24 -0500 [warn]: #0 failed to flush the buffer. retry_time=14 next_retry_seconds=2020-02-27 23:52:00 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-27 21:38:24 -0500 [warn]: #0 suppressed same stacktrace
2020-02-28 00:03:08 -0500 [warn]: #0 failed to flush the buffer. retry_time=15 next_retry_seconds=2020-02-28 05:08:34 -0500 chunk="59f97ad6ff8ab3c10cd75c8581eb8e22" error_class=Fluent::Plugin::ForwardOutput::NoNodesAvailable error="no nodes are available"
2020-02-28 00:03:08 -0500 [warn]: #0 suppressed same stacktrace
2020-02-28 03:32:01 -0500 [info]: #0 force flushing buffered events
